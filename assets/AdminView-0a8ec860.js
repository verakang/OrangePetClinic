import{_ as h,o,c as a,a as t,F as d,g as _,t as r,f,r as u,b as p,z as w}from"./index-74bbfc2a.js";import{S as m}from"./sweetalert2.all-ac8ef29f.js";const{VITE_URL:k,VITE_PATH:y}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"orangepetclinic",VITE_BLOG_PATH:"orangepetclinic-blog",BASE_URL:"/OrangePetClinic/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},x={data(){return{articles:[],articleTemp:{},isNew:!1,updateTitle:"新增文章",page:{},isLoading:!1,isDone:!0}},methods:{getData(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexschool\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s;const l=`${k}/v2/api/${y}/admin/articles`;this.$http.get(l).then(n=>{this.articles=n.data.articles,this.page=n.data.pagination,this.isLoading=!1}).catch(n=>{m.fire({position:"center",icon:"error",title:`${n.response.data.message}`,showConfirmButton:!1,timer:1e3,timerProgressBar:!0,toast:!0})})}},mounted(){this.getData()}},C={class:"text-end mt-4"},L={class:"table-responsive-xxl"},T={class:"admin_table table table-hover mt-4"},V=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"120"}," 日期 "),t("th",null,"標題"),t("th",{width:"100"}," 是否啟用 "),t("th",{width:"120"}," 編輯 ")])],-1),D={class:"text-truncate"},E={key:0,class:"text-success"},B={key:1},P={class:"btn-group"},M=["onClick"],A=["onClick"];function R(s,l,n,b,i,c){return o(),a(d,null,[t("div",C,[t("button",{type:"button",class:"btn btn-primary text-white",onClick:l[0]||(l[0]=()=>s.openModal("create"))}," 建立新的文章 ")]),t("div",L,[t("table",T,[V,t("tbody",null,[(o(!0),a(d,null,_(i.articles,e=>(o(),a("tr",{key:e.id},[t("td",null,r(s.$moment(new Date(e.create_at*1e3)).format("YYYY-MM-DD")),1),t("td",D,r(e.title),1),t("td",null,[e.isPublic?(o(),a("span",E,"啟用")):(o(),a("span",B,"未啟用"))]),t("td",null,[t("div",P,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:()=>s.openModal("edit",e.id)}," 編輯 ",8,M),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>s.openModal("delete",e.id)}," 刪除 ",8,A)])])]))),128))])])])],64)}const I=h(x,[["render",R]]),{VITE_URL:O,VITE_BLOG_PATH:S}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"orangepetclinic",VITE_BLOG_PATH:"orangepetclinic-blog",BASE_URL:"/OrangePetClinic/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Y={data(){return{articles:[],articleTemp:{},isNew:!1,updateTitle:"新增文章",page:{},isLoading:!1,isDone:!0}},methods:{getData(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexschool\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s;const l=`${O}/v2/api/${S}/admin/articles`;this.$http.get(l).then(n=>{this.articles=n.data.articles,this.page=n.data.pagination,this.isLoading=!1}).catch(n=>{m.fire({position:"center",icon:"error",title:`${n.response.data.message}`,showConfirmButton:!1,timer:1e3,timerProgressBar:!0,toast:!0})})}},mounted(){this.getData()}},N={class:"text-end mt-4"},U={class:"table-responsive-xxl"},H={class:"admin_table table table-hover mt-4"},z=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"120"}," 日期 "),t("th",null,"標題"),t("th",{width:"100"}," 是否啟用 "),t("th",{width:"120"}," 編輯 ")])],-1),G={class:"text-truncate"},F={key:0,class:"text-success"},j={key:1},q={class:"btn-group"},J=["onClick"],K=["onClick"];function Q(s,l,n,b,i,c){return o(),a(d,null,[t("div",N,[t("button",{type:"button",class:"btn btn-primary text-white",onClick:l[0]||(l[0]=()=>s.openModal("create"))}," 建立新的文章 ")]),t("div",U,[t("table",H,[z,t("tbody",null,[(o(!0),a(d,null,_(i.articles,e=>(o(),a("tr",{key:e.id},[t("td",null,r(s.$moment(new Date(e.create_at*1e3)).format("YYYY-MM-DD")),1),t("td",G,r(e.title),1),t("td",null,[e.isPublic?(o(),a("span",F,"啟用")):(o(),a("span",j,"未啟用"))]),t("td",null,[t("div",q,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:()=>s.openModal("edit",e.id)}," 編輯 ",8,J),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>s.openModal("delete",e.id)}," 刪除 ",8,K)])])]))),128))])])])],64)}const W=h(Y,[["render",Q]]);const X={components:{RouterLink:f,NewsComponent:I,BlogComponent:W},data(){return{isLoading:!1}},methods:{logout(){document.cookie=`hexschool=; expires=${new Date}`,this.$router.push("/")}},mounted(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},500)}},Z={class:"container mt-7"},tt={class:"d-flex align-items-center"},et=t("h3",{class:"mx-4"},"後台管理",-1),st={class:"container px-5 py-8 d-flex align-items-start"},lt={class:"row d-flex w-100 gx-0"},nt=t("div",{class:"col-md-2 nav flex-column nav-pills",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},[t("button",{class:"nav-link active",id:"v-pills-booklist-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-booklist",type:"button",role:"tab","aria-controls":"v-pills-booklist","aria-selected":"true"},"約診名單"),t("button",{class:"nav-link",id:"v-pills-news-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-news",type:"button",role:"tab","aria-controls":"v-pills-news","aria-selected":"false"},"最新消息"),t("button",{class:"nav-link",id:"v-pills-blog-tab","data-bs-toggle":"pill","data-bs-target":"#v-pills-blog",type:"button",role:"tab","aria-controls":"v-pills-blog","aria-selected":"false"},"衛教文章")],-1),ot={class:"col-md-10 tab-content",id:"v-pills-tabContent"},at=t("div",{class:"tab-pane fade show active",id:"v-pills-booklist",role:"tabpanel","aria-labelledby":"v-pills-booklist-tab"},[t("div",{class:"admin_table table-responsive px-2"},[t("table",{class:"table table-hover"},[t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"#"),t("th",{style:{width:"100"}},"日期"),t("th",{style:{width:"120"}},"時間"),t("th",{style:{width:"80"}},"寵物"),t("th",{style:{width:"80"}},"飼主"),t("th",{style:{width:"120"}},"電話"),t("th",null,"狀況說明")])]),t("tbody",null,[t("tr",null,[t("th",null,"1"),t("td",null,"2023/9/20"),t("td",null,"10:00-11:00"),t("td",null,"橘子"),t("td",null,"Vera"),t("td",null,"0911234567"),t("td",null,"食慾不振、拉肚子")]),t("tr",null,[t("th",null,"2"),t("td",null,"2023/9/20"),t("td",null,"10:00-11:00"),t("td",null,"喵喵"),t("td",null,"Peter"),t("td",null,"0910334561"),t("td",null,"嘔吐")]),t("tr",null,[t("th",null,"2"),t("td",null,"2023/9/27"),t("td",null,"19:00-20:00"),t("td",null,"橘子"),t("td",null,"Vera"),t("td",null,"0911234567"),t("td",null,"定期腎指數觀測")])])])])],-1),it={class:"tab-pane fade px-2",id:"v-pills-news",role:"tabpanel","aria-labelledby":"v-pills-news-tab"},dt={class:"tab-pane fade px-2",id:"v-pills-blog",role:"tabpanel","aria-labelledby":"v-pills-blog-tab"};function ct(s,l,n,b,i,c){const e=u("VueLoading"),g=u("NewsComponent"),v=u("BlogComponent");return o(),a(d,null,[p(e,{active:i.isLoading,loader:"dots",color:"#1ca0b8"},null,8,["active"]),t("section",Z,[t("div",tt,[et,t("a",{onClick:l[0]||(l[0]=w((...$)=>c.logout&&c.logout(...$),["prevent"])),class:"link-notice"},"登出")])]),t("section",st,[t("div",lt,[nt,t("div",ot,[at,t("div",it,[p(g)]),t("div",dt,[p(v)])])])])],64)}const pt=h(X,[["render",ct]]);export{pt as default};
